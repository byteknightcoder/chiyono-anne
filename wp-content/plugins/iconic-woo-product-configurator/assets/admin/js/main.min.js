!function(l,r){var t={cache(){t.els={},t.vars={},t.els.upload=l(".jckpc-attribute-image__upload"),t.els.remove=l(".jckpc-attribute-image__remove")},on_ready(){t.cache(),t.setup_image_fields()},setup_image_fields(){let n;t.els.upload.on("click",function(t){t.preventDefault();let e=l(this),a=e.closest(".jckpc-attribute-image"),i=a.find(".jckpc-attribute-image__field"),o=a.find(".jckpc-attribute-image__preview"),c=a.find(".jckpc-attribute-image__remove");(n=wp.media.frames.file_frame=wp.media({title:l(this).data("title"),button:{text:l(this).data("button-text")},multiple:!1})).on("select",function(){attachment=n.state().get("selection").first().toJSON(),attachment_url=(void 0!==attachment.sizes.thumbnail?attachment.sizes.thumbnail:attachment).url,i.val(attachment.id),o.html('<img src="'+attachment_url+'" class="attachment-thumbnail size-thumbnail">'),e.addClass("jckpc-attribute-image__upload--edit"),c.show(),l(r.body).trigger("pc_image_selected")}),n.open()}),t.els.remove.on("click",function(t){t.preventDefault();var t=l(this).closest(".jckpc-attribute-image"),e=t.find(".jckpc-attribute-image__field"),a=t.find(".jckpc-attribute-image__preview"),t=t.find(".jckpc-attribute-image__upload");e.val(""),a.html(""),t.removeClass("jckpc-attribute-image__upload--edit"),l(this).hide()})}};window.iconic_pc_attribute=t,l(r).ready(t.on_ready())}(jQuery,document),function(t,e){var a={cache(){a.vars={},a.vars.enabled="#jckpc_enabled",a.vars.wrapper="#jckpc_options",a.vars.toolbar=".jckpc-meta-toolbar",a.vars.static_layer="#jckpc-add-static-layer"},on_ready(){a.cache(),a.setup_blockUI(),t(e).on("jckpc_toggled",function(){a.setup_blockUI()})},setup_blockUI(){t(a.vars.toolbar).length<=0||(t(a.vars.enabled).is(":checked")?(t(a.vars.wrapper).unblock(),t(a.vars.static_layer).attr("disabled",!1)):(t(a.vars.wrapper).block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t(a.vars.static_layer).attr("disabled",!0)))}};window.iconic_pc_main=a,t(e).ready(a.on_ready())}(jQuery,document),function(r,c){var n={cache(){n.els={},n.vars={},n.tmpl={},n.vars.file_frame=!1,n.vars.upload_class=".jckpc-image-button--upload",n.vars.remove_class=".jckpc-image-button--remove",n.vars.collapse_class=".jckpc-layer-options__title--collapse",n.vars.conditional_group_class=".iconic-pc-conditional-group",n.vars.conditional_group_class_attribute=".iconic-pc-conditional-group__attribute",n.vars.add_conditional_group_button_class=".iconic-pc-add-conditional-group",n.vars.add_conditional_rule_button_class=".iconic-pc-conditional-group__add-rule",n.vars.remove_conditional_group_class=".iconic-pc-conditional-group__remove",n.vars.remove_conditional_rule_class=".iconic-pc-conditional-group__rule-remove",n.vars.conditional_rule_class=".iconic-pc-conditional-group__rule",n.els.add_static_layer=r("#jckpc-add-static-layer"),n.els.sort_order_input=r("#jckpc_sort_order"),n.els.sortable_items=r("#jckpc_sortable"),n.tmpl.static_layer=wp.template("jckpc-static-layer")},on_ready(){n.cache(),n.setup_image_fields(),n.setup_sorting(),n.setup_collapse(),n.setup_static_layers(),n.setup_conditional_groups()},setup_image_fields(){r(c).on("click",n.vars.upload_class,function(t){t.preventDefault();let o=r(this);n.vars.file_frame=wp.media.frames.file_frame=wp.media({title:o.attr("data-uploader_title"),button:{text:o.attr("data-uploader_button_text")},multiple:!1,library:{type:"image/png"}}),n.vars.file_frame.on("select",function(){var t,e,a,i=n.vars.file_frame.state().get("selection").first().toJSON();"image/png"!==i.mime?alert(jckpc_vars.i18n.png_only):(t=r(o.attr("data-uploader_field")),e=r(o.attr("data-uploader_field")+"_thumbwrap"),a=(void 0!==i.sizes.thumbnail?i.sizes.thumbnail:i).url,t.val(i.id),e.find("img").remove(),e.prepend('<img src="'+a+'" width="80" height="80" />'),r(c.body).trigger("pc_image_selected"))}),n.vars.file_frame.open()}),r(c).on("click",n.vars.remove_class,function(){var t=r(this).attr("data-uploader_field");return r(t).val(""),r(t+"_thumbwrap img").remove(),!1})},setup_sorting(){n.els.sortable_items.sortable({revert:!0,handle:".jckpc-layer-options__handle",update(t,e){n.update_sort_field()}})},update_sort_field(){if(!(n.els.sort_order_input.length<=0)){let t=n.els.sortable_items.find(".jckpc-layer-options"),e=[];t.each(function(){var t=r(this).attr("data-layer-id");e.push(t)}),n.els.sort_order_input.val(e.join(",")),r(c.body).trigger("pc_layer_order_changed")}},setup_collapse(){r(c).on("click",n.vars.collapse_class,function(){var t=r(this),e=t.find(".jckpc-layer-options__toggle");t.closest(".jckpc-layer-options").find(".jckpc-layer-options__content-wrapper").toggle(),e.toggleClass("jckpc-layer-options__toggle--collapsed")})},setup_static_layers(){n.els.add_static_layer.on("click",function(){r("#jckpc_sortable").prepend(n.tmpl.static_layer({index:n.get_highest_static_layer_index()+1})),n.update_sort_field(),r("html,body").animate({scrollTop:r("#woocommerce-product-data").offset().top-120},100)}),r(c).on("click",".jckpc-layer-options__remove",function(){r(this).closest(".jckpc-layer-options").remove(),n.update_sort_field()})},get_highest_static_layer_index(){var t=r("[data-static-layer-index]").map(function(){return r(this).data("static-layer-index")}).get(),t=Math.max.apply(Math,t);return isFinite(t)?t:-1},setup_conditional_groups(){r(c.body).on("click",n.vars.add_conditional_group_button_class,function(t){t.preventDefault();let e=r(this),a=e.data("iconic-pc-add-conditional-group"),i=a;e.attr("disabled",!0),void 0!==i&&(i.action="iconic_pc_get_conditional_group",i.nonce=jckpc_vars.nonce,r.post(ajaxurl,i,function(t){e.attr("disabled",!1),t.success&&(a.condition_id=parseInt(a.condition_id)+1,e.before(t.data.html).data("iconic-pc-add-conditional-group",a))}))}),r(c.body).on("click",n.vars.add_conditional_rule_button_class,function(t){t.preventDefault();let e=r(this),c=e.closest(".iconic-pc-conditional-group__rules"),a=c.find(".iconic-pc-conditional-group__rule").first().clone(),n=c.find(".iconic-pc-conditional-group__rule select.iconic-pc-conditional-group__attribute"),i=a.find("select"),l=parseInt(e.data("iconic-pc-rule-id"));i.val(""),i.each(function(t,e){let a=r(e),i=a.attr("name"),o=i.replace("[rules][0]","[rules]["+l+"]");a.attr("name",o),a.hasClass("iconic-pc-conditional-group__attribute")&&(n.each(function(t,e){e=r(e).find("option:selected").val();a.find('option[value="'+e+'"]').hide(),a.find('option[value="'+e+'"]').attr("disabled",!0)}),1===a.find('option:not(:disabled)[value!=""]').length)&&(a.val(a.find('option:not(:disabled)[value!=""]').val()),(e=a.closest(".iconic-pc-conditional-group__rule").find(".iconic-pc-conditional-group__value")).val(e.find('optgroup[data-slug="'+a.find('option:not(:disabled)[value!=""]').val()+'"]').find("option:first").val()),e.children().hide(),e.find('optgroup[data-slug="'+a.find('option:not(:disabled)[value!=""]').val()+'"]').show(),c.find(".iconic-pc-conditional-group__add-rule").attr("disabled",!0)),""!==a.find("option:first").val()&&a.val(a.find("option:first").val())}),c.find("tbody").append(a)}),r(c.body).on("click",n.vars.remove_conditional_group_class,function(t){t.preventDefault(),r(this).closest(n.vars.conditional_group_class).remove()}),r(c.body).on("click",n.vars.remove_conditional_rule_class,function(t){t.preventDefault();var t=r(this),e=t.closest(n.vars.conditional_rule_class);t.closest(".iconic-pc-conditional-group__rules").find(".iconic-pc-conditional-group__add-rule").attr("disabled",!1),e.remove()}),r(c.body).on("change",n.vars.conditional_group_class_attribute,function(t){var e=r(this).val(),a=r(this).closest(".iconic-pc-conditional-group__rule").find(".iconic-pc-conditional-group__value");""===e?(a.children().show(),a.val(null)):(a.val(a.find('optgroup[data-slug="'+e+'"]').find("option:first").val()),a.children().hide(),a.find('optgroup[data-slug="'+e+'"]').show())}),r(c.body).ready(function(){r(n.vars.conditional_group_class_attribute).each(function(){var t=r(this).val(),e=r(this).closest(".iconic-pc-conditional-group__rule").find(".iconic-pc-conditional-group__value");e.children().hide(),e.find('optgroup[data-slug="'+t+'"]').show()})}),r(c.body).on("reload",function(){r(".jckpc-reload-notice").show()})}};window.iconic_pc_product=n,r(c).ready(n.on_ready())}(jQuery,document),function(l,e){var t={cache(){t.vars={},t.vars.toggles=".jckpc_toggle",t.vars.toggle_elements=".jckpc-toggle-element"},on_ready(){t.cache(),t.setup_toggles(),t.trigger_toggles()},setup_toggles(){l(t.vars.toggles).each(function(t,e){var a=l(e).find("input"),i=a.attr("id"),o=l(e).find("label"),c=l('<span class="woocommerce-help-tip"></span>'),n=(c.attr("data-tip",o.html()),l('<button type="button" class="jckpc-toggle-element"></button>'));n.attr("data-id",i),a.is(":checked")&&n.addClass("checked"),l(e).append(n),l(e).append(c),a.hide(),o.hide()})},trigger_toggles(){l(e).on("click",t.vars.toggle_elements,function(){var t=l(this).attr("data-id"),t=l("input#"+t);t.is(":checked")?(t.prop("checked",!1),t.trigger("change"),l(this).removeClass("checked")):(t.prop("checked",!0),t.trigger("change"),l(this).addClass("checked")),l(e).trigger("jckpc_toggled")})}};window.iconic_pc_toggle=t,l(e).ready(t.on_ready())}(jQuery,document);