ul.theme-primary-menu {
  .quadmenu-item-type-mega {
    ul.owl-carousel {
      .quadmenu-item-type-panel {
        li.quadmenu-item-type-panel {
          .c-product-item--link_title {
            @include cProdCardLinkTitle();

            @include mq-up() {
              @include cProdCardLinkTitle(var(--productCardTitleFontSize));
            }
          }
        }
      }
    }
  }
}

@media (max-width: 1180px) and (min-width: 992px) {
  .sticky_header.is-scroll #quadmenu.quadmenu-custom_theme_1 .quadmenu-navbar-nav>li.quadmenu-item>a {
    padding: 0 12px;
  }
}

@include mq-down(lm) {
  .menu-layout-custom .header-container .header-logo {
    padding: 10px 0;
  }

  .header-logo>.theme-logo {
    width: 100px;
  }

  .header__user__link {
    position: relative;

    &:not(.minicart__trigger) {
      display: flex;
      padding: 0px 24px;
      line-height: var(--NavMobileLinkH);
      font-size: .875rem;
      background-color: var(--NavMobileLinkBg);
      border-bottom: solid 1px #e8e8e8;
      transition-duration: 600ms;
    }
  }

  .menu-layout-custom {
    .nav-container.nav--active {
      .header-menu {
        height: calc(100% - (var(--NavMobileLinkH) * 2 + 2px - var(--NavMobileH))) !important;
        background: #FFF;
        padding-bottom: 0;
        display: flex;
        flex-direction: column;
        width: 100%;

        nav#quadmenu {
          width: 100%;

          ul.quadmenu-navbar-nav {
            flex: 1;
          }
        }

        nav#quadmenu,
        nav#quadmenu>div,
        nav#quadmenu>div>div {
          display: flex;
          flex-direction: column;
          flex: 1;
        }
      }
    }
  }

  .header__user.display--mid-only,
  .header__sett {
    margin-top: 24px;
  }

  .header__secondary__content {
    #quadmenu.quadmenu-custom_theme_1 {
      .quadmenu-navbar-nav {
        >li {
          &:not(.quadmenu-item-type-button).quadmenu-has-link.quadmenu-item-has-children.open {
            position: absolute;
            z-index: 3;
            top: 0;
            min-height: 100%;
            height: 100%;
            width: 100%;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
          }
        }
      }
    }
  }

  #theme-menu-layout {
    .nav-container {
      &.nav--active>nav#quadmenu {
        min-height: 1px;
      }

      #quadmenu:not(.quadmenu-is-horizontal).quadmenu-mobile-shadow-show {
        box-shadow: none;
      }
    }
  }

  a#headerAccountLink:before {
    content: "\ea31";
    display: inline-block;
    font-weight: normal;
    font-family: 'oecicon';
    speak: none;
    text-transform: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    vertical-align: middle;
    margin-right: 8px;
    font-size: 115%;
  }

  a#headerWishlistLink:before {
    content: "\ea2c";
    display: inline-block;
    font-weight: normal;
    font-family: 'oecicon';
    speak: none;
    text-transform: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    vertical-align: middle;
    margin-right: 8px;
    font-size: 115%;
  }
}

//Moved from QuadMenu > Customizer
@include mq-down(lm) {
  .header__user {
    &.display--mid-only {
      margin-top: 1px;
      position: inherit;
      width: 100%;
      bottom: 0px;
    }
  }

  li.icon-back>a>span:before {
    content: "\ea0b";
    font-family: 'oecicon';
    speak: none;
    text-transform: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    display: block;
    padding-right: 10px;
  }

  .nav--active {

    >nav#quadmenu,
    >nav#quadmenu>.quadmenu-container,
    >nav#quadmenu>.quadmenu-container>.quadmenu-navbar-collapse,
    >nav#quadmenu>.quadmenu-container>.quadmenu-navbar-collapse>.quadmenu-navbar-nav {
      min-height: 100%;
    }
  }

}

#quadmenu {
  $bp: 'lm';

  .mini-product__item.mini-product__series+.product_title {
    display: block;
  }

  .owl-carousel {
    .quadmenu-item-type-panel {
      padding: 0 0.25rem;

      .mini-product__item {
        margin-bottom: 0;

        a {
          line-height: 1;
        }
      }
    }
  }

  &.quadmenu-custom_theme_1 {
    @include mq-down($bp) {
      .quadmenu-text {
        order: 0;
        padding: 0;
        font-size: 1rem;
        bottom: auto;
        top: auto;
        left: auto;
        right: auto;
      }
    }

    //Top Level ul
    ul.quadmenu-navbar-nav {
      li.quadmenu-item {
        .quadmenu-item-content {
          @include mq-down($bp) {
            .has_new {
              position: absolute;
              bottom: 20px;
              left: auto;
              right: 20px;
              transform: none;
              display: inline-block;
              text-align: center;

              &:before {
                content: none;
              }

              >span {
                background: $black;
                color: var(--NavMobileLinkBg);
                border-radius: 12px;
                padding: 3px 6px 2px;
                line-height: 1;
                font-weight: 600;
              }
            }
          }
        }
      }

      >li.quadmenu-item>a {
        font-size: 13px;
        line-height: 52px;
        padding: 0 16px;

        @include mq-up($bp) {
          padding: 0 16px;
        }
      }

      @include mq-up($bp) {
        li.quadmenu-item {
          .owl-carousel .quadmenu-item-type-panel {
            flex: 1;
          }
        }

        .quadmenu-dropdown-menu {
          li.quadmenu-item {
            &.no_link.quadmenu-item:not(.quadmenu-item-type-column) {
              margin-bottom: var(--spacingGeneral);
              white-space: nowrap;
            }

            &:not(.quadmenu-item-type-column):not(.no_link):not(:last-child) {
              margin-bottom: var(--spacingGeneral);
            }

            &.view_all_link>a {
              text-transform: uppercase;
              font-family: var(--fontPrice);
              font-weight: 400;
              letter-spacing: .1em;
              font-size: .75rem;
            }
          }

          ul.owl-carousel {
            padding-bottom: 0;
            display: flex;
            flex-wrap: wrap;
          }
        }

      }

      @include mq-down($bp) {
        .no_link {

          &.pickup_title>a,
          &.pickup_title,
          &.pickup_title:hover,
          &.pickup_title:focus {
            pointer-events: none !important;
            background: none !important;
          }

          .pickup_title>a {
            border-bottom: none !important;
          }
        }

        li.quadmenu-item {
          $owlSpace-lm: .75rem;

          >a {
            background: var(--NavMobileLinkBg);
          }

          &.open>a.quadmenu-dropdown-toggle {
            background: none;
          }

          &.quadmenu-dropdown:not(.open) {
            height: 60px !important;
            min-height: 0px !important;
          }

          ul.owl-carousel {
            display: flex;
            flex-wrap: wrap;
            width: auto;

            .quadmenu-item-type-panel {
              >li.quadmenu-item-type-panel {
                margin-bottom: 24px;
              }
            }

            .quadmenu-product-cart {
              display: none !important;
            }
          }

          //Same class as .pickup_menu_content
          &.quadmenu-has-image-large {
            padding-left: 1.5rem;
            padding-right: 1.5rem;
          }

          &:not(.open)>a>.quadmenu-item-content>.quadmenu-caret:before {
            font-family: 'oecicon' !important;
            content: "\ea09" !important;
            color: $black;
          }

          &.icon-back>a>span.quadmenu-item-content {
            justify-content: flex-start !important;
          }

          &.has_link_sm {
            >a {
              background: var(--NavMobileLinkBg);
            }
          }

          &.quadmenu-has-link.icon-back:hover {
            background-color: transparent;
          }
        }

        .quadmenu-dropdown-menu {
          li.quadmenu-item {
            &.no_link.quadmenu-item:not(.quadmenu-item-type-column) {
              margin-bottom: 0;

              &:not(.no_link) {
                &:not(:last-child) {
                  margin-bottom: 0;
                }

                &:not(.pickup_menu_content) {
                  display: none;
                }
              }
            }
          }

          ul.open-child {
            overflow-y: auto;
            height: auto;
          }

          ul:not(.open-child)>li.quadmenu-item {
            &:not(.pickup_menu_content):not(.no_link):not(.quadmenu-item-type-column) {
              display: none;

              &.has_link_sm.link_all_item {
                display: block;
              }
            }

          }
        }

        >li {
          &.quadmenu-item>a.close_prvlevel {
            display: none;
          }

          &:not(.quadmenu-item-type-button).quadmenu-has-link.quadmenu-item-has-children {
            >a.quadmenu-dropdown-toggle+.quadmenu_btt {
              background: var(--NavMobileLinkBg);
            }

            &.open {
              position: absolute;
              z-index: 3;
              top: 0;
              min-height: 100%;
              height: auto;
              width: 100%;
              overflow-y: auto;
              -webkit-overflow-scrolling: touch;

              >a.quadmenu-dropdown-toggle:not(.close_prvlevel) {
                height: auto;
              }
            }
          }

          &:not(.no_link).quadmenu-item.open>a.quadmenu-dropdown-toggle {
            background-color: var(--NavMobileBg);

            >.quadmenu-item-content>.quadmenu-caret:before {
              font-family: 'oecicon' !important;
              content: "\ea0b" !important;
              color: $black;
            }
          }
        }

        //End of break point
      }

      @include mq-down(xs) {
        $owlSpace: 5px;

        li.quadmenu-item {
          .owl-carousel {
            .mini-product__item.mini-product__series {
              +.product_title {
                font-size: 0.75rem;
                line-height: 1.15;
                margin-bottom: 0.25rem;
              }

              &.heading.heading--small {
                margin-bottom: .25rem;
                font-size: 2.66666vw;
              }
            }

            .owl-stage {
              margin-left: calc(#{$owlSpace} * -1);
              margin-right: calc(#{$owlSpace} * -1);

              >.quadmenu-item-type-panel {
                padding: 0;

                >li.quadmenu-item-type-panel {
                  padding-left: $owlSpace;
                  padding-right: $owlSpace;
                }
              }
            }
          }

          .quadmenu-dropdown-menu {
            li.quadmenu-item>a>.quadmenu-item-content .quadmenu-product-price .amount {
              font-size: 0.654rem;
            }
          }
        }

      }
    }

    &.quadmenu-is-horizontal {
      background: none;

      //Parent ul
      ul.quadmenu-navbar-nav {
        li.quadmenu-item {
          >.quadmenu-dropdown-menu {
            border-top: none;
          }

          @include mq-down($bp) {
            &:not(.no_link) {
              >a {
                background-color: var(--NavMobileLinkBg);
              }
            }
          }
        }
      }

      @include mq-up($bp) {
        background-color: var(--NavMobileLinkBg);
        color: $black;
      }
    }

    &:not(.quadmenu-is-horizontal) {
      ul.quadmenu-navbar-nav {
        li.quadmenu-item {

          //Pickup Mega Menu
          ul.owl-carousel {
            padding-bottom: 0;

            .owl-nav {
              display: none !important;
            }

            li.quadmenu-item-type-panel.quadmenu-item-object-product {

              //thum div
              .quad_itemimg__div {
                .quadmenu-item-content {
                  padding: 0;
                }
              }

              //title + price div
              .quad_iteminfo__div {
                padding-top: var(--spacingSmall);

                >.quad_iteminfo__div {
                  padding-top: 0;
                }

                .mini-product__series {
                  margin-bottom: .25rem;
                }
              }
            }

            div.quadmenu-item-type-panel>li.quadmenu-item>a {
              >.quadmenu-item-content {
                padding: 0;
                height: auto;
              }
            }
          }

          @include mq-down($bp) {
            .owl-carousel {
              .quadmenu-item-type-panel>li.quadmenu-item-object-product>a>.quadmenu-item-content {
                flex-direction: column;
                justify-content: center;
                align-items: center;
              }
            }

            >a {
              font-family: var(--fontPrimary);
            }

            a.quadmenu-dropdown-toggle {
              .quadmenu-item-content {
                .quadmenu-caret:before {
                  width: auto;
                  height: auto;
                  top: auto;
                  margin: 0;
                }
              }
            }

            //child menu
            >.quadmenu-dropdown-menu {
              top: auto;
              width: 100%;
              background-color: var(--NavMobileBg);
              transform: translateX(100%);
              overflow-y: auto;
              -webkit-overflow-scrolling: touch;

              //2nd Level Menu
              >ul.quadmenu-row {
                display: block !important;

                >li {
                  max-width: 100%;
                  width: 100%;

                  &.close_otherchild {
                    display: none;
                  }
                }
              }

              //OwlCarousel
              .owl-carousel {
                li.quadmenu-item.quadmenu-item-object-product {
                  .quadmenu-item-content {
                    flex-direction: column;
                    align-items: center;
                  }
                }
              }
            }

            &:not(:last-child):not(:only-child):not(.pickup_title)>a {
              border-color: #e8e8e8;
            }

            &:not(:last-child):not(:only-child).pickup_title>a {
              border: none !important;
            }

            .quadmenu-item-content {
              padding: 20px 24px;
              font-size: .875rem;
              position: relative;
              display: flex;
              justify-content: space-between;
              align-items: baseline;

              >.quadmenu-caret {
                position: relative;
                -webkit-box-ordinal-group: 1;
                -ms-flex-order: 1;
                -webkit-order: 1;
                order: 1;
                padding: 0;
                font-size: 1rem;
              }
            }

            &.pickup_title>a>.quadmenu-item-content {
              >.quadmenu-text {
                font-size: .75rem;
              }
            }

            &.open {

              //Parent Link which has child menu
              >a {
                .quadmenu-item-content>.quadmenu-text {
                  padding-left: 24px;
                }

                &:not(.close_prvlevel)>.quadmenu-item-content>.quadmenu-caret {
                  position: absolute;
                  width: 100%;
                  background: none;
                  left: 0px;
                  top: 0px;
                }

                >.quadmenu-item-content>.quadmenu-caret:before {
                  text-align: left;
                  padding-left: 24px;
                  top: 50%;
                  transform: translateY(-50%);
                }
              }

              .quadmenu-dropdown-toggle {
                padding: 0 !important;

                .quadmenu-item-content {
                  height: var(--NavHeightMobile);
                  display: flex;
                  align-items: center;

                  .quadmenu-text {
                    line-height: 1 !important;
                  }
                }
              }

              &:not(.closing) {
                >.quadmenu-dropdown-menu {
                  top: auto;
                  width: 100%;
                  background-color: var(--NavMobileBg);
                  transform: translateX(0);

                  ul.open-child {
                    .icon-back {
                      background-color: var(--NavMobileBg);
                    }
                  }
                }

                >a.close_prvlevel+.quadmenu-dropdown-menu {
                  top: 0;

                  >.quadmenu-row>li,
                  >.quadmenu-row>li>div {
                    overflow-y: auto;
                    height: auto;
                  }
                }
              }
            }

            &:not(.open) {
              >a {
                padding: 0;

                .quadmenu-item-content {
                  line-height: 1;
                  height: var(--NavHeightMobile);
                  display: flex;
                  align-items: center;
                }
              }

              &:not(:last-child):not(:only-child):not(.pickup_title)>a {
                border-bottom: solid 1px #e8e8e8;
              }
            }
          }
        }

      }
    }

  }
}